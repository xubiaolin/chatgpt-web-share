import{d as V,Y as A,r as s,w as r,P as b,Q as E,V as n,U as a,c as m,X as p,G as d,R as u,S as z,n as N}from"./vue-aaa0e4fd.js";import{b as P,c as Q}from"./system-c76c4647.js";import{O as j,P as D,F,K as G,e as O,Q as X,g as Y,R as $,k as q}from"./naive_ui-66407851.js";import"./index-39327448.js";const H={class:"mb-4 flex flex-col"},J={class:"flex flex-row mt-3 justify-between"},M={class:"flex flex-wrap flex-row sm:space-x-3"},W={class:"option-item"},Z={class:"option-item"},ee={class:"option-item"},le={class:"flex items-center space-x-2"},ue=V({__name:"log_viewer",setup(ne){const{t:_}=A(),c=s(5),v=s("server"),w=s(),y=s(!0),i=s(100),f=s([]),x=s(["status","logs"]),k=s();r(()=>v.value,()=>{o()}),r(()=>i.value,()=>{o()});const L=()=>{N(()=>{var t;(t=k.value)==null||t.scrollTo({position:"bottom",slient:!1})})},o=()=>{v.value==="server"?P({max_lines:i.value,exclude_keywords:x.value}).then(t=>{w.value=t.data}):Q({max_lines:i.value,exclude_keywords:f.value}).then(t=>{w.value=t.data}),y.value&&L()};o();let I=setInterval(()=>{o()},c.value*1e3);return r(()=>c.value,()=>{clearInterval(I),I=setInterval(()=>{o()},c.value*1e3)}),r(()=>x.value,()=>{o()}),r(()=>f.value,()=>{o()}),(t,e)=>{const h=j,B=D,g=F,C=G,S=O,U=X,K=Y,R=$,T=q;return b(),E("div",H,[n(B,{value:v.value,"onUpdate:value":e[0]||(e[0]=l=>v.value=l),type:"segment"},{default:a(()=>[n(h,{name:"server"},{default:a(()=>[m(p(d(_)("commons.serverLogs")),1)]),_:1})]),_:1},8,["value"]),u("div",J,[u("div",M,[u("div",W,[n(g,null,{default:a(()=>[m(p(d(_)("commons.maxLineCount")),1)]),_:1}),n(C,{value:i.value,"onUpdate:value":e[1]||(e[1]=l=>i.value=l),size:"small",class:"w-27",min:100,max:2e3,step:100},null,8,["value"])]),u("div",Z,[n(g,null,{default:a(()=>[m(p(d(_)("commons.updateInterval")),1)]),_:1}),n(S,{value:c.value,"onUpdate:value":e[2]||(e[2]=l=>c.value=l),size:"small",class:"w-20",options:[{label:"3s",value:3},{label:"5s",value:5},{label:"10s",value:10}]},null,8,["value"])]),u("div",ee,[n(g,null,{default:a(()=>[m(p(d(_)("commons.excludeKeywords")),1)]),_:1}),v.value==="proxy"?(b(),z(U,{key:0,value:f.value,"onUpdate:value":e[3]||(e[3]=l=>f.value=l),size:"small"},null,8,["value"])):(b(),z(U,{key:1,value:x.value,"onUpdate:value":e[4]||(e[4]=l=>x.value=l),size:"small"},null,8,["value"]))])]),u("div",le,[n(g,null,{default:a(()=>[m(p(d(_)("commons.autoScrolling")),1)]),_:1}),n(K,{value:y.value,"onUpdate:value":e[5]||(e[5]=l=>y.value=l),size:"small"},null,8,["value"])])]),n(T,{class:"mt-3 flex-grow h-full","content-style":{height:"100%"}},{default:a(()=>[n(R,{ref_key:"logInstRef",ref:k,"font-size":10,rows:40,lines:w.value},null,8,["lines"])]),_:1})])}}});export{ue as default};
//# sourceMappingURL=log_viewer-ef9f2c29.js.map
